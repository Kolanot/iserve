<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2013-10-21
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20131021" />
    <meta http-equiv="Content-Language" content="en" />
    <title>iServe - Developing Extensions</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/kmi/iserve">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="images/iServe-logo.png"  alt="iServe" width="263" height="475"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-10-21</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 2.0.0-SNAPSHOT</li>
                      
                
                    
      
                                              
    <li class="pull-right">              <a href="http://kmi.open.ac.uk" class="externalLink" title="KMi">
        KMi</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://iserve.kmi.open.ac.uk" class="externalLink" title="iServe Blog">
        iServe Blog</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                  
      <li>
    
                          <a href="overview.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                  
      <li>
    
                          <a href="data-model.html" title="Data Model">
          <i class="none"></i>
        Data Model</a>
            </li>
                  
      <li>
    
                          <a href="architecture.html" title="Architecture">
          <i class="none"></i>
        Architecture</a>
            </li>
                  
      <li>
    
                          <a href="configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                  
      <li>
    
                          <a href="usage.html" title="Using iServe">
          <i class="none"></i>
        Using iServe</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Extending iServe</a>
          </li>
                              <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="iserve-commons-io/index.html" title="iServe Commons I/O">
          <i class="none"></i>
        iServe Commons I/O</a>
            </li>
                  
      <li>
    
                          <a href="iserve-commons-vocabulary/index.html" title="iServe Commons Vocabulary">
          <i class="none"></i>
        iServe Commons Vocabulary</a>
            </li>
                  
      <li>
    
                          <a href="iserve-importer-sawsdl/index.html" title="iServe SAWSDL Importer">
          <i class="none"></i>
        iServe SAWSDL Importer</a>
            </li>
                  
      <li>
    
                          <a href="iserve-importer-hrests/index.html" title="iServe hRESTS Importer">
          <i class="none"></i>
        iServe hRESTS Importer</a>
            </li>
                  
      <li>
    
                          <a href="iserve-importer-owls/index.html" title="iServe OWL-S Importer">
          <i class="none"></i>
        iServe OWL-S Importer</a>
            </li>
                  
      <li>
    
                          <a href="iserve-importer-wsc/index.html" title="iServe WSC 2008 Importer">
          <i class="none"></i>
        iServe WSC 2008 Importer</a>
            </li>
                  
      <li>
    
                          <a href="iserve-sal-core/index.html" title="iServe Storage Access Layer (SAL) Core">
          <i class="none"></i>
        iServe Storage Access Layer (SAL) Core</a>
            </li>
                  
      <li>
    
                          <a href="iserve-sal-rest/index.html" title="iServe SAL REST">
          <i class="none"></i>
        iServe SAL REST</a>
            </li>
                  
      <li>
    
                          <a href="iserve-discovery-api/index.html" title="iServe Discovery API">
          <i class="none"></i>
        iServe Discovery API</a>
            </li>
                  
      <li>
    
                          <a href="iserve-discovery-disco/index.html" title="iServe Disco Discovery Plug-in">
          <i class="none"></i>
        iServe Disco Discovery Plug-in</a>
            </li>
                  
      <li>
    
                          <a href="iserve-discovery-engine/index.html" title="iServe Discovery Engine">
          <i class="none"></i>
        iServe Discovery Engine</a>
            </li>
                  
      <li>
    
                          <a href="iserve-test-resources/index.html" title="iServe Shared Test Resources">
          <i class="none"></i>
        iServe Shared Test Resources</a>
            </li>
                              <li class="nav-header">Reports</li>
                                                                                                                                                                                              
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Extending iServe<a name="Extending_iServe"></a></h2>
<p>We have tried to support a certain degree of extensibility for iServe by providing a plugin mechanism. This mechanism is currently available for 3rd party developers to provide their own import mechanisms for new formats, as well as for including new matching algorithms. The plugin mechanism is based on Java's ServiceLoader combined with <a class="externalLink" href="http://code.google.com/p/google-guice/"> Guice</a> to support the automated detection and use of plugin implementations at runtime, and can therefore be exploited simply by dropping a new jar in the classpath.</p>
<ul>
<li><a href="#Developing_a_new_Import_Plugin">Developing a new Import Plugin</a>
<ul>
<li><a href="#Dependencies">Dependencies</a></li>
<li><a href="#Testing_that_the_Plugin_Mechanism_Works">Testing that the Plugin Mechanism Works</a></li></ul></li>
<li><a href="#Developing_a_new_Matcher">Developing a new Matcher</a>
<ul>
<li><a href="#Dependencies">Dependencies</a></li>
<li><a href="#Testing_that_the_Plugin_Mechanism_Works">Testing that the Plugin Mechanism Works</a></li></ul></li></ul>
<div class="section">
<h3><a name="Developing_a_new_Import_Plugin">Developing a new Import Plugin</a></h3>
<p>Providing an import plugin requires two main things. First and foremost you must implement the code for transforming service descriptions in the format you want to be able to import, to the ones iServe can handle. You should for this simply provide an implementation of <i>uk.ac.open.kmi.iserve.commons.io.ServiceTransformer</i>.</p>
<p>Once implemented you should also provide a Guice module that ensures you declare your new implementation as a binding for ServiceTransformer. Given that many implementations of this method may be available at runtime, we make use of <a class="externalLink" href="http://code.google.com/p/google-guice/wiki/Multibindings"> Guice's multibinding mechanism</a> and index each implementation by the media type they support. Note that should there be service formats with the same media type, the engine will have no means to know how to choose the right one so be sure to chose a new one or remove the competing implementation from your classpath. Below you have a simple example on how such a Guice module should look like.</p>
<div class="source">
<pre>
public class OwlsTransformationPlugin extends AbstractModule implements TransformationPluginModule {

    @Override
    protected void configure() {
        MapBinder&lt;String,ServiceTransformer&gt; binder = MapBinder.newMapBinder(binder(), String.class, ServiceTransformer.class);
        binder.addBinding(OwlsTransformer.mediaType).to(OwlsTransformer.class);
    }
}
</pre></div>
<p>The final thing required for the plugin to be automatically picked up by iServe is to provide the appropriate information for <a class="externalLink" href="http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html"> Java's ServiceLoader</a> to locate your implementation. You should do this creating a file at <i>META-INF/services/uk.ac.open.kmi.iserve.commons.io.TransformationPluginModule</i>. The content of the file should just include a line with the complete name of your plugin implementation, eg., :</p>
<div class="source">
<pre>uk.ac.open.kmi.iserve.importer.owls.OwlsTransformationPlugin</pre></div>
<p>Developers using Maven can automate this last step easily by using <i>serviceloader-maven-plugin</i>. To do so, simply include the following in your plugin's POM file:</p>
<div class="source">
<pre>&lt;!-- Generate the META-INF/services information for ServiceLoader --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;eu.somatik.serviceloader-maven-plugin&lt;/groupId&gt;
    &lt;artifactId&gt;serviceloader-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.2&lt;/version&gt;
    &lt;configuration&gt;
        &lt;services&gt;
            &lt;param&gt;uk.ac.open.kmi.iserve.commons.io.TransformationPluginModule&lt;/param&gt;
        &lt;/services&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;generate&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</pre></div>
<div class="section">
<h4><a name="Dependencies">Dependencies</a></h4>
<p>Given that we use Guice and its multibinding extension for the plugin mechanism, these are also dependencies for your plugin.</p>
<p>Maven users can include the necessary dependencies by including the following:</p>
<div class="source">
<pre>&lt;dependency&gt;
    &lt;groupId&gt;uk.ac.open.kmi.iserve.commons&lt;/groupId&gt;
    &lt;artifactId&gt;iserve-commons-io&lt;/artifactId&gt;
    &lt;version&gt;${project.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;!--Add Guice for dependency injection --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.google.inject&lt;/groupId&gt;
    &lt;artifactId&gt;guice&lt;/artifactId&gt;
    &lt;version&gt;${guice.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;com.google.inject.extensions&lt;/groupId&gt;
    &lt;artifactId&gt;guice-multibindings&lt;/artifactId&gt;
    &lt;version&gt;${guice.version}&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div>
<div class="section">
<h4><a name="Testing_that_the_Plugin_Mechanism_Works">Testing that the Plugin Mechanism Works</a></h4>
<p>Should you wish to ensure that the plugin mechanism works and picks up properly your implementation, you can simply try our generic transformer over the services you wish to transform. Below you have an example on how this can be done.</p>
<div class="source">
<pre>List&lt;Services&gt; services = Transformer.getInstance().transform(file, null, OwlsTransformer.mediaType );</pre></div></div></div>
<div class="section">
<h3><a name="Developing_a_new_Matcher">Developing a new Matcher</a></h3>
<p>Matchers are provided in iServe by means of the very same plugin mechanism used for transformation plugins. In this case however the interface that needs to be implemented is one of the <i>uk.ac.open.kmi.iserve.discovery.api.Matcher</i> extensions, e.g., ConceptMatcher. The Guice module to implement in this case is <i>uk.ac.open.kmi.iserve.discovery.api.MatcherPluginModule</i>.</p>
<p>For the case of Matcher plugins, iServe will choose them at runtime on the basis of their class name, and should thus be registered indexed by that. Below you have a complete example of a Guice module.</p>
<div class="source">
<pre>public class DiscoMatchersPlugin extends ConfiguredModule implements MatcherPluginModule {

    @Override
    protected void configure() {
        // Ensure we configure it
        super.configure();

        MapBinder&lt;String, ConceptMatcher&gt; conceptBinder = MapBinder.newMapBinder(binder(), String.class, ConceptMatcher.class);
        conceptBinder.addBinding(SparqlLogicConceptMatcher.class.getName()).to(SparqlLogicConceptMatcher.class).in(Singleton.class);

    }
}</pre></div>
<p>Like for import plugins, it is necessary to include the file for enabling Java's ServiceLoader to detect the implementation at runtime. In this case, the file to provide is <i>META-INF/services/uk.ac.open.kmi.iserve.discovery.api.MatcherPluginModule</i>. The content of the file should just include a line with the complete name of your plugin implementation, eg., :</p>
<div class="source">
<pre>uk.ac.open.kmi.iserve.discovery.disco.impl.DiscoMatchersPlugin</pre></div>
<p>Maven developers can automated this last step by including the following in the plugin's POM file:</p>
<div class="source">
<pre>&lt;!-- Generate the META-INF/services information for ServiceLoader --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;eu.somatik.serviceloader-maven-plugin&lt;/groupId&gt;
    &lt;artifactId&gt;serviceloader-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.2&lt;/version&gt;
    &lt;configuration&gt;
        &lt;services&gt;
            &lt;param&gt;uk.ac.open.kmi.iserve.discovery.api.MatcherPluginModule&lt;/param&gt;
        &lt;/services&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;generate&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</pre></div>
<div class="section">
<h4><a name="Dependencies">Dependencies</a></h4>
<p>Given that we use Guice and its multibinding extension for the plugin mechanism, these are also dependencies for your plugin.</p>
<p>Maven users can include the necessary dependencies by including the following:</p>
<div class="source">
<pre>&lt;dependency&gt;
    &lt;groupId&gt;uk.ac.open.kmi.iserve.discovery&lt;/groupId&gt;
    &lt;artifactId&gt;iserve-discovery-api&lt;/artifactId&gt;
    &lt;version&gt;${project.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;!--Add Guice for dependency injection --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.google.inject&lt;/groupId&gt;
    &lt;artifactId&gt;guice&lt;/artifactId&gt;
    &lt;version&gt;${guice.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;com.google.inject.extensions&lt;/groupId&gt;
    &lt;artifactId&gt;guice-multibindings&lt;/artifactId&gt;
    &lt;version&gt;${guice.version}&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div>
<div class="section">
<h4><a name="Testing_that_the_Plugin_Mechanism_Works">Testing that the Plugin Mechanism Works</a></h4>
<p>Should you wish to ensure that the plugin mechanism works and picks up properly your implementation, you can simply try to obtain and use your Matcher by means of the <i>uk.ac.open.kmi.iserve.discovery.api.impl.MatchersFactory</i>. Below you have an example on how this can be done.</p>
<div class="source">
<pre>ConceptMatcher matcher = MatchersFactory.createConceptMatcher(SparqlLogicConceptMatcher.class.getName());</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013
                        <a href="http://kmi.open.ac.uk">Knowledge Media Institute - The Open University</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
